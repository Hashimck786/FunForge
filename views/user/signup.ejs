<%- include('../layout/header') %>
    <main class="main">
        <section class="pt-150 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">
                            <div class="col-lg-1"></div>
                            <div class="col-lg-6">
                                <div class="login_wrap widget-taber-content p-30 background-white border-radius-5">
                                    <div class="padding_eight_all bg-white">
                                        <div class="heading_s1">
                                            <h3 class="mb-30">Create an Account</h3>
                                        </div>
                                        <p class="mb-50 font-sm">
                                            Your personal data will be used to support your experience throughout this website, to manage access to your account, and for other purposes described in our privacy policy
                                        </p>
                                        <form method="post" action="/signup" id="signupForm">
                                            <div class="form-group">
                                                <input type="text" required="true" name="username" placeholder="Username"  id="username"  oninput="validateUsername()">
                                                <span class="text-warning" id="errorusername"></span>
                                                <% if(typeof error !== 'undefined') { %>
                                                    <%if (error && error.username) { %>
                                                        <span class="text-danger"><%=error.username.msg%></span>
                                                    <%}   %> 
                                               <% } %>
                                                

                                            </div>
                                            <div class="form-group">
                                                <input type="text" required="true" name="email" id="email" placeholder="Email" oninput="validateEmail()">
                                                <span class="text-warning" id="erroremail"></span>
                                                <% if(typeof error !== 'undefined') { %>
                                                    <%if (error && error.email) { %>
                                                        <span class="text-danger"><%=error.email.msg%></span>
                                                    <%}   %> 
                                               <% } %>
                                            </div>
                                            <div class="form-group">
                                                <input type="number" required="true" name="mobile" id="mobile" placeholder="Mobile Number" oninput="validateMobile()">
                                                <span class="text-warning" id="errormobile"></span>
                                                <% if(typeof error !== 'undefined') { %>
                                                    <%if (error && error.mobile) { %>
                                                        <span class="text-danger"><%=error.mobile.msg%></span>
                                                    <%}   %> 
                                               <% } %>
                                            </div>
                                            <div class="form-group">
                                                <input required="true" type="password" name="password" id="password" placeholder="Password" oninput="validatePassword()">
                                                <span class="text-warning" id="errorpassword"></span>
                                                <% if(typeof error !== 'undefined') { %>
                                                    <%if (error && error.password) { %>
                                                        <span class="text-danger"><%=error.password.msg%></span>
                                                    <%}   %> 
                                               <% } %>
                                            </div>
                                            <div class="form-group">
                                                <input required="true" type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirm Password" oninput="validateConfirmPassword()">
                                                <span class="text-warning" id="errorConfirmPassword"></span>
                                            </div>
                                            <div class="form-group">
                                                <input  type="text" name="referralCode" id placeholder="Enter referralCode">
                                            </div>
                                            <div class="login_footer form-group">
                                                <div class="chek-form">
                                                    <div class="custome-checkbox">
                                                        <input class="form-check-input" type="checkbox" name="checkbox" id="exampleCheckbox12" value="">
                                                        <label class="form-check-label" for="exampleCheckbox12"><span>I agree to terms &amp; Policy.</span></label>
                                                    </div>
                                                </div>
                                                <a href="page-privacy-policy.html"><i class="fi-rs-book-alt mr-5 text-muted"></i>Lean more</a>
                                            </div>
                                            <div class="form-group">
                                                <button type="submit" class="btn btn-fill-out btn-block hover-up" name="login">Submit &amp; Register</button>
                                            </div>
                                        </form>
                                        <% if(typeof message != "undefined"){ %>
                                            <div class="text-center text-danger"><%=message %></div>
                                        <% } %>

                                        <div class="divider-text-center mt-15 mb-15">
                                            <span> or</span>
                                        </div>
                                        <!-- <ul class="btn-login list_none text-center mb-15">
                                            <li><a href="#" class="btn btn-facebook hover-up mb-lg-0 mb-sm-4">Login With Facebook</a></li>
                                            <li><a href="#" class="btn btn-google hover-up">Login With Google</a></li>
                                        </ul> -->
                                        <div class="text-muted text-center">Already have an account? <a href="/login">Sign in now</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        function validateUsername() {
            var username = document.getElementById("username").value;
            var errorUsername = document.getElementById("errorusername");
            errorUsername.innerHTML = "";
    
            if (username.trim() === "") {
                errorUsername.innerHTML = "Username is required";
            } else if (username.length < 3 || username.length > 12) {
                errorUsername.innerHTML = "Username must be between 3 and 12 characters";
            }
        }
    
        function validateEmail() {
            var email = document.getElementById("email").value;
            var erroremail = document.getElementById("erroremail");
            erroremail.innerHTML = "";
    
            if (email.trim() === "") {
                erroremail.innerHTML = "Email is required";
            }
        }
    
        function validateMobile() {
            var mobile = document.getElementById("mobile").value;
            var errormobile = document.getElementById("errormobile");
            errormobile.innerHTML = "";
    
            if (mobile.trim() === "") {
                errormobile.innerHTML = "Mobile is required";
            } else if (mobile.length !== 10) {
                errormobile.innerHTML = "Mobile must be 10 digits";
            }
        }
    
        function validatePassword() {
            var password = document.getElementById("password").value;
            var errorpassword = document.getElementById("errorpassword");
            errorpassword.innerHTML = "";
    
            if (password.trim() === "") {
                errorpassword.innerHTML = "Password is required";
            } else if (password.length < 8) {
                errorpassword.innerHTML = "Password must be at least 8 characters";

            }
        }
    
        function validateConfirmPassword() {
            var password = document.getElementById("password").value;
            var confirmPassword = document.getElementById("confirmPassword").value;
            var errorConfirmPassword = document.getElementById("errorConfirmPassword");
            errorConfirmPassword.innerHTML = "";
    
            if (confirmPassword.trim() === "") {
                errorConfirmPassword.innerHTML = "Confirm password required";
            } else if (confirmPassword !== password) {
                errorConfirmPassword.innerHTML = "Passwords do not match";
            }
        }
    
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('signupForm');
    
            form.addEventListener('submit', function (event) {
                // Validate username
                
                const usernameInput = document.getElementById('username');
                const errorUsername = document.getElementById('errorusername');
                const username = usernameInput.value.trim();

                if (username === '') {
                    errorUsername.innerText = 'Username is required';
                    event.preventDefault();
                } else if (!isValidUsername(username)) {
                    errorUsername.innerText = 'Invalid username';
                    event.preventDefault();
                } else {
                    errorUsername.innerText = '';
                }

                function isValidUsername(username) {
                // Define a regular expression to allow only alphanumeric characters and underscore
                const regex = /^[a-zA-Z0-9_]+$/;
                return regex.test(username);
                }

    
                // Validate email
                const email = document.getElementById('email').value.trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (email === '' || !emailRegex.test(email)) {
                    document.getElementById('erroremail').innerText = 'Enter a valid email address';
                    event.preventDefault();
                } else {
                    document.getElementById('erroremail').innerText = '';
                }
    
                // Validate mobile number
                const mobile = document.getElementById('mobile').value.trim();
                const mobileRegex = /^[0-9]{10}$/;
                if (mobile === '' || !mobileRegex.test(mobile)) {
                    document.getElementById('errormobile').innerText = 'Enter a valid 10-digit mobile number';
                    event.preventDefault();
                } else {
                    document.getElementById('errormobile').innerText = '';
                }
    
                // Validate password
                const password = document.getElementById('password').value;
                if (password === '') {
                    document.getElementById('errorpassword').innerText = 'Password is required';
                    event.preventDefault();
                } else {
                    document.getElementById('errorpassword').innerText = '';
                }
    
                // Validate confirm password
                const confirmPassword = document.getElementById('confirmPassword').value;
                if (confirmPassword === '' || confirmPassword !== password) {
                    document.getElementById('errorConfirmPassword').innerText = 'Passwords do not match ';
                    event.preventDefault();
                } else {
                    document.getElementById('errorConfirmPassword').innerText = '';
                }
    
                // Validate terms and policy checkbox
                const checkbox = document.getElementById('exampleCheckbox12');
                if (!checkbox.checked) {
                    alert('Please agree to terms & policy');
                    event.preventDefault();
                }
            });
        });
    </script>
    
    
    <%-include('../layout/footer') %>