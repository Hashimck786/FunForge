<%- include('../layout/header') %>
    <main class="main">
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product-detail accordion-detail">
                            <div class="row mb-50 ">
                                <div class="col-md-6 col-sm-12 col-xs-12 " >
                                    <div class="detail-gallery" >
                                        <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                        <!-- MAIN SLIDES -->
                                        <div class="product-image-slider" style="width: 500px; height: 500px;border-radius: 5%;" >
                                            <figure class="border-radius-10"  >
                                                <img src="/admin-assets/imgs/productImages/<%= product.image[0] %>" alt="product image"  style="width: 500px; height: 500px; border-radius: 5%;">
                                            </figure>
                                            <figure class="border-radius-10" >
                                                <img src="/admin-assets/imgs/productImages/<%= product.image[1] %>" alt="product image"  style="width: 500px; height: 500px; border-radius: 5%;" >
                                            </figure>
                                            <figure class="border-radius-10" >
                                                <img src="/admin-assets/imgs/productImages/<%= product.image[2] %>" alt="product image"  style="width: 500px; height: 500px; border-radius: 5%;">
                                            </figure>
                                            <figure class="border-radius-10" >
                                                <img src="/admin-assets/imgs/productImages/<%= product.image[3] %>" alt="product image"  style="width: 500px; height: 500px; border-radius: 5%;">
                                            </figure>
                                            <figure class="border-radius-10" >
                                                <img src="/admin-assets/imgs/productImages/<%= product.image[4] %>" alt="product image"  style="width: 500px; height: 500px; border-radius: 5%;" >
                                            </figure>
                                        </div>
                                        <!-- THUMBNAILS -->
                                        <%if(typeof product != "undefined "){ %>
                                        <div class="slider-nav-thumbnails pl-15 pr-15">
                                            <div><img src="/admin-assets/imgs/productImages/<%= product.image[0] %>" alt="product image" class="minislider"></div>
                                            <div><img src="/admin-assets/imgs/productImages/<%= product.image[1] %>" alt="product image" class="minislider"></div>
                                            <div><img src="/admin-assets/imgs/productImages/<%= product.image[2] %>" alt="product image" class="minislider"></div>
                                            <div><img src="/admin-assets/imgs/productImages/<%= product.image[3] %>" alt="product image" class="minislider"></div>
                                            <div><img src="/admin-assets/imgs/productImages/<%= product.image[4] %>" alt="product image" class="minislider"></div>
                                        </div>
                                     <% }else{ %>
                                        <h4>Product image not available</h4>
                                     <% } %>
                                    </div>
                                    <!-- End Gallery -->
                                </div>
                                <div class="col-md-6 col-sm-12 col-xs-12">
                                    <div class="detail-info">
                                        <h2 class="title-detail"><%=product.productName %></h2>
                                        <div class="product-detail-rating">
                                            <div class="pro-details-brand">
                                                <span> Brands: <a href="shop-grid-right.html">Bootstrap</a></span>
                                            </div>
                                            <div class="product-rate-cover text-end">
                                                <div class="product-rate d-inline-block">
                                                    <div class="product-rating" style="width:90%">
                                                    </div>
                                                </div>
                                                <span class="font-small ml-5 text-muted"> (25 reviews)</span>
                                            </div>
                                        </div>
                                        <div class="clearfix product-price-cover">
                                            <div class="product-price primary-color float-left">
                                                <ins><span class="text-brand">$120.00</span></ins>
                                                <ins><span class="old-price font-md ml-15"><%= product.productPrice %></span></ins>
                                                <span class="save-price  font-md color3 ml-15"><%= product.salePrice %></span>
                                            </div>
                                        </div>
                                        <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                        <div class="short-desc mb-30">
                                            <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Aliquam rem officia, corrupti reiciendis minima nisi modi, quasi, odio minus dolore impedit fuga eum eligendi? Officia doloremque facere quia. Voluptatum, accusantium!</p>
                                        </div>
                                        <div class="product_sort_info font-xs mb-30">
                                            <ul>
                                                <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 1 Year AL Jazeera Brand Warranty</li>
                                                <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> 30 Day Return Policy</li>
                                                <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery available</li>
                                            </ul>
                                        </div>
                                        <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                        <div class="detail-extralink">
                                            <div class="product-extra-link2">
                                                <% if(typeof user != "undefined" && user){ %>
                                                    <button type="button" class="button button-add-to-cart cart-btn" productId="<%= product._id %>">Add to cart</button>
                                                    <a aria-label="Add To Wishlist" class="action-btn hover-up wish-btn" productId="<%= product._id %>" href=""><i class="fi-rs-heart"></i></a>
                                                <% }else{ %>
                                                    <a aria-label="Add To Wishlist" class="action-btn hover-up" productId="<%= product._id %>" href="/login"><i class="fi-rs-heart"></i></a>
                                                    <a aria-label="Add to cart" class="action-btn hover-up" productId="<%= product._id %>" href="/login"><i class="fas fa-shopping-cart"></i></a>
                                                <% }%>
                                            </div>
                                        </div>
                                        <ul class="product-meta font-xs color-grey mt-50">
                                            <li class="mb-5">SKU: <a href="#">FWM15VKT</a></li>
                                            <li class="mb-5">Tags: <a href="#" rel="tag">Cloth</a>, <a href="#" rel="tag">Women</a>, <a href="#" rel="tag">Dress</a> </li>
                                            <li>Availability:<span class="in-stock text-success ml-5">8 Items In Stock</span></li>
                                        </ul>
                                    </div>
                                    <!-- Detail Info -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-10 m-auto entry-main-content">
                                    <h2 class="section-title style-1 mb-30">Description</h2>
                                    <div class="description mb-50">
                                        <p>Uninhibited carnally hired played in whimpered dear gorilla koala depending and much yikes off far quetzal goodness and from for grimaced goodness unaccountably and meadowlark near unblushingly crucial scallop
                                            tightly neurotic hungrily some and dear furiously this apart.</p>
                                        <p>Spluttered narrowly yikes left moth in yikes bowed this that grizzly much hello on spoon-fed that alas rethought much decently richly and wow against the frequent fluidly at formidable acceptably flapped
                                            besides and much circa far over the bucolically hey precarious goldfinch mastodon goodness gnashed a jellyfish and one however because.
                                        </p>
                                        <ul class="product-more-infor mt-30">
                                            <li><span>Type Of Packing</span> Bottle</li>
                                            <li><span>Color</span> Green, Pink, Powder Blue, Purple</li>
                                            <li><span>Quantity Per Case</span> 100ml</li>
                                            <li><span>Ethyl Alcohol</span> 70%</li>
                                            <li><span>Piece In One</span> Carton</li>
                                        </ul>
                                        <hr class="wp-block-separator is-style-dots">
                                        <p>Laconic overheard dear woodchuck wow this outrageously taut beaver hey hello far meadowlark imitatively egregiously hugged that yikes minimally unanimous pouted flirtatiously as beaver beheld above forward
                                            energetic across this jeepers beneficently cockily less a the raucously that magic upheld far so the this where crud then below after jeez enchanting drunkenly more much wow callously irrespective limpet.</p>
                                        <h4 class="mt-30">Packaging & Delivery</h4>
                                        <hr class="wp-block-separator is-style-wide">
                                        <p>Less lion goodness that euphemistically robin expeditiously bluebird smugly scratched far while thus cackled sheepishly rigid after due one assenting regarding censorious while occasional or this more crane
                                            went more as this less much amid overhung anathematic because much held one exuberantly sheep goodness so where rat wry well concomitantly.
                                        </p>
                                        <p>Scallop or far crud plain remarkably far by thus far iguana lewd precociously and and less rattlesnake contrary caustic wow this near alas and next and pled the yikes articulate about as less cackled dalmatian
                                            in much less well jeering for the thanks blindly sentimental whimpered less across objectively fanciful grimaced wildly some wow and rose jeepers outgrew lugubrious luridly irrationally attractively
                                            dachshund.
                                        </p>
                                    </div>
                                   
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log("dom loaded")
            const addToCartButtons = document.querySelectorAll('.cart-btn');
            console.log("cart button accesssed")
            addToCartButtons.forEach(function (button) {
                button.addEventListener('click', async function (event) {
                    event.preventDefault();
                    const productId = this.getAttribute('productId');
                    console.log('productId', productId);
                    const response = await fetch(`/addtocart/?id=${productId}`, {
                        method: 'GET'
                    });
                    const productData = await response.json();
                    console.log('productdata', productData);
                    if (productData.success) {
                        console.log("success");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                        swal.fire({
                            icon: 'success',
                            title: 'Added to Cart',
                            text: 'The product has been added to the cart'
                        });
                    }
                    if (productData.outofstock) {
                        swal.fire({
                            icon: 'error',
                            title: 'Out of Stock',
                            text: 'The product is out of stock'
                        })
                    }
                });
            });
        });
    </script>
        <!-- add to wish list with sweet alert -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
               console.log("dom loaded")
               const addToWishlistButtons = document.querySelectorAll('.wish-btn');
               console.log("cart button accesssed")
               addToWishlistButtons.forEach(function (button) {
                   button.addEventListener('click', async function (event) {
                       event.preventDefault();
                       const productId = this.getAttribute('productId');
                       console.log('productId', productId);
                       const response = await fetch(`/addwishlist/?id=${productId}`, {
                           method: 'GET'
                       });
                       const productData = await response.json();
                       console.log('productdata', productData);
                       if (productData.success) {
                           console.log("success");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                           swal.fire({
                               icon: 'success',
                               title: 'Added to Wishlist',
                               text: 'The product has been added to wishlist'
                           });
                       }else{
                           swal.fire({
                               icon: 'failed',
                               title: 'failed to Add to Wishlist',
                               text: 'The product hasnot been added to wishlist'
                           });
                       }
                   });
               });
           });
       </script>
<%-include('../layout/footer') %>